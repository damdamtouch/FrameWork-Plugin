<h2>Framework Creator</h2>
<p>Name: <input id="name" value="" /></p>
<p>ID: <input id="id" value="" /></p>
<p>Node: <input id="node" value="" /></p>
<p>Count: <input id="count" value="" /></p>
<p>
  Client:
  <select id="client" value=""></select>
</p>
<button id="create">Create</button>

<script>
  console.log("Bonjour Ã  tous ");
  onmessage = (event) => {
    console.log("got this from the plugin code", event.data.pluginMessage);
    document.getElementById("name").value = event.data.pluginMessage[0];
    document.getElementById("id").value = event.data.pluginMessage[1];
    document.getElementById("node").value = event.data.pluginMessage[2];
    document.getElementById("count").value = event.data.pluginMessage[4];
    event.data.pluginMessage[5].forEach((client) => {
      document.getElementById("client").add(new Option(client));
    });
  };

  document.getElementById("create").onclick = () => {
    console.log("Collecting values");
    const allValues = [
      document.getElementById("name").value,
      document.getElementById("id").value,
      document.getElementById("node").value,
      document.getElementById("count").value,
      document.getElementById("client").value,
    ];

    console.log(allValues);
    parent.postMessage(
      { pluginMessage: { type: "create-framework", allValues } },
      "*"
    );
  };
</script>
